var suso={rules:{},views:{}};!function(e){"use strict";e.EventAware=function(e){var t={};return e.on=function(n,r){return void 0===t[n]&&(t[n]=[]),t[n].push(r),e},e.off=function(n,r){var o;return void 0===t[n]?e:(o=t[n].indexOf(r),-1===o?e:(t[n].splice(o,1),e))},e.trigger=function(n){var r,o,i=t[n];if(void 0===i)return e;for(Array.prototype.splice.call(arguments,0,1),r=0;r<i.length;r+=1)o=i[r],void 0!==o&&"function"==typeof o&&o.apply(this,arguments);return e},e}}(suso),function(e){"use strict";function t(e,t){-1===e.indexOf(t)&&e.push(t)}e.filter=function(e,t){var n,r={};if(void 0===e||"object"!=typeof e)throw new Error("Filter object not specified");if(void 0===t||"function"!=typeof t)throw new Error("Filter function not specified");for(n in e)e.hasOwnProperty(n)&&t(e[n],n)&&(r[n]=e[n]);return r},e.forEach=function(e,t){var n,r,o={};if(void 0===e||"object"!=typeof e)throw new Error("ForEach object not specified");if(void 0===t||"function"!=typeof t)throw new Error("ForEach function not specified");for(n in e)e.hasOwnProperty(n)&&(r=t(e[n],n),o[n]=r||e[n]);return o},e.sets=function(t,n,r){var o,i,s=[];if(void 0===t||null===t||"object"!=typeof t)throw new Error("source parameter is not an object or array");if(i=t instanceof Array?t:Object.keys(t),void 0===n||null===n||"number"!=typeof n)throw new Error("size parameter is not a valid number");if(void 0===r&&(r=function(e){return e}),"function"!=typeof r)throw new Error("val parameter is not a function");return 0===n||n>i.length?s:1===n?i:n===i.length?[i]:2===n?(i.forEach(function(e,t){i.filter(function(e,n){return n>t}).forEach(function(t){s.push([e,t])})}),s):(o=e.sets(i,n-1),i.forEach(function(e){o.forEach(function(t){r(t[0])>r(e)&&s.push([e].concat(t))})}),s)},e.union=function(){var e,n,r=[];if(0===arguments.length)return r;for(e=Array.prototype.slice.call(arguments);e.length>0;)n=e.shift(),"object"==typeof n&&n instanceof Array?n.forEach(function(e){t(r,e)}):t(r,n);return r},e.isOrdinalArray=function(e){var t;return void 0!==e&&"object"==typeof e&&e instanceof Array&&0!==e.length?(t=e.filter(function(e){return void 0===e||null===e||isNaN(e)||2>e||e>5}),0===t.length):!1}}(suso),function(e){"use strict";function t(){function t(e,t){p++,"ready"===f&&(h.trigger("update",h),h.trigger("report",e,t))}function n(){for(i=0;9>i;i++)a.push(new e.House("block",i,h)),c.push(new e.House("col",i,h)),u.push(new e.House("row",i,h));for(i=0;81>i;i++)s=new e.Cell(h),s.on("update",t),s.setHouse(u[Math.floor(i/9)]),s.setHouse(c[i%9]),s.setHouse(a[Math.floor(i/3)%3+3*Math.floor(i/27)]);f="unseeded"}function r(){u.forEach(function(e){e.cells().forEach(function(e){e.off("update",t),e.release()})}),o=[]}var o,i,s,l,a=[],c=[],u=[],f="init",p=0,d=[],h=this;this.seedSolved=d,this.state=function(){return f},this.rows=u,this.cols=c,this.col=function(e){return c[e]},this.row=function(e){return u[e]},this.block=function(e){return a[e]},this.allGroups=function(){return void 0===l&&(l=u.concat(c).concat(a)),l},this.addSeeds=function(e){var t,n,r;if("unseeded"!==f)return this;for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)r=e[t][n],void 0!==r&&"number"==typeof r&&u[t].cells()[n].setValue(r);return f="ready",h.trigger("report",h,"grid seeded"),this},this.solve=function(){var t,n,i,s=!0;if("complete"===f||"incomplete"===f)return this;for(h.trigger("start",h),n=0;n<d.length;n++)i=d[n].possibleValues(),1===i.length&&d[n].setValue(i[0],"one remaining value after seeding");for(o=[e.rules.lastInGroup,e.rules.restrictedPossibleValue,e.rules.nakedsets,e.rules.hiddensets];s&&81!==p;)for(s=!1,t=0;t<o.length&&81!==p;t++)s=s||o[t](h);return f=81===p?"complete":"incomplete",h.trigger("report",h,"grid "+f),h.trigger("finish",h),r(),this},n()}e.Grid=function(){return new e.EventAware(new t)}}(suso),function(e){"use strict";function t(e,t,n){function r(e){var t=Math.pow(2,9-e);return(l&t)===t}function o(e){var t=e.value();if(!r(t))throw new Error("Attempt to set a Cell to a value not contained in House's possibles list.");l^=Math.pow(2,9-t),a--}function i(){c.trigger("update",this),o(this)}var s=[],l=Math.pow(2,9)-1,a=9,c=this;this.possibleValues=function(){var e,t=[];for(e=1;10>e;e++)r(e)&&t.push(e);return t},this.addCell=function(e){return s.push(e),e.on("update",i),c},this.grid=function(){return n},this.type=function(){return e},this.num=function(){return t},this.cells=function(){return s},this.name=function(){return e+" "+t.toString()},this.releaseCell=function(e){e.off("update",i)}}e.House=function(n,r,o){return new e.EventAware(new t(n,r,o))}}(suso),function(e){"use strict";function t(e,t){function n(e){var t=e.value();u.removePossible(t)}var r,o=e,i=[],s={row:0,col:1,block:2},l=Math.pow(2,9)-1,a=9,c=!1,u=this;this.id=function(){return o},this.hasPossible=function(e){var t=Math.pow(2,9-e);return(l&t)===t},this.removePossible=function(e){return u.hasPossible(e)?(l^=Math.pow(2,9-e),a--,1===a&&("ready"===t.state()?u.setValue(u.possibleValues()[0],"last remaining possible value in cell"):t.seedSolved.push(u)),!0):!1},this.grid=function(){return t},this.value=function(){return r},this.isSeed=function(){return c},this.setValue=function(e,n){if(void 0!==r)throw new Error("Attempt to set value on a Cell that already has a value.");"unseeded"===t.state()&&(c=!0),r=e,l=0,a=0,this.trigger("update",this,n)},this.setHouse=function(e){var t=s[e.type()];if(void 0===t)throw new Error("invalid house");if(void 0!==i[t])throw new Error("Attempt to set "+e.type()+" on a Cell that already has a "+e.type()+".");i[t]=e,e.addCell(this),e.on("update",n)},this.row=function(){return i[s.row]},this.col=function(){return i[s.col]},this.block=function(){return i[s.block]},this.possibleValues=function(){var e,t=[];for(e=1;10>e;e++)u.hasPossible(e)&&t.push(e);return t},this.possibleFlags=function(){return l},this.coords=function(){return void 0===i[s.row]||void 0===i[s.col]?[]:[i[s.row].num(),i[s.col].num()]},this.release=function(){u.row().off("update",n),u.row().releaseCell(u),u.col().off("update",n),u.col().releaseCell(u),u.block().off("update",n),u.block().releaseCell(u)}}var n=0;e.Cell=function(r){return new e.EventAware(new t(n++,r))}}(suso),function(e){"use strict";e.rules.hiddensets=function(t,n){var r,o,i,s=!1,l=[2,3,4,5];return e.isOrdinalArray(n)&&(l=n),l.forEach(function(n){t.allGroups().filter(function(e){return e.possibleValues().length>n}).forEach(function(l){r={},l.cells().filter(function(e){return void 0===e.value()}).forEach(function(e){e.possibleValues().forEach(function(t){void 0===r[t]&&(r[t]=[]),r[t].push(e)})}),r=e.filter(r,function(e){return e.length<=n}),e.sets(r,n).forEach(function(l){var a=[],c=0;l.forEach(function(t){a=e.union(a,r[t]),c|=Math.pow(2,9-parseInt(t,10))}),a.length===n&&a.forEach(function(e){for(o=e.possibleFlags()^c,i=9;o>0;)(1&o)>0&&e.removePossible(i)&&(t.trigger("report",e,"hidden sets ("+n.toString()+") - remove possible "+i),s=!0),i--,o>>=1})})})}),s}}(suso),function(e){"use strict";e.rules.lastInGroup=function(e){var t,n,r,o,i,s,l,a=e.allGroups(),c=!1;for(t=0;t<a.length;t++){for(s={},n=a[t].cells(),r=0;r<n.length;r++)for(o=n[r].possibleValues(),i=0;i<o.length;i++)void 0===s[o[i]]&&(s[o[i]]=[]),s[o[i]].push(n[r]);for(l in s)s.hasOwnProperty(l)&&1===s[l].length&&void 0===s[l][0].value()&&(s[l][0].setValue(parseInt(l,10),"last in group - "+a[t].name()),c=!0)}return c}}(suso),function(e){"use strict";e.rules.nakedsets=function(t,n){var r,o=!1,i=t.allGroups(),s=[2,3,4,5];return e.isOrdinalArray(n)&&(s=n),s.forEach(function(n){i.filter(function(e){return e.possibleValues().length>n}).forEach(function(i){r=i.cells().filter(function(e){return void 0===e.value()&&e.possibleValues().length<=n}),e.sets(r,n).forEach(function(r){var s=[],l=!1;r.forEach(function(t){s=e.union(s,t.possibleValues())}),s.length===n&&(i.cells().filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){s.forEach(function(t){e.removePossible(t)&&(l=!0)})}),l&&(o=!0,t.trigger("report",i,"naked sets rule ("+n.toString()+") - remove possible vals "+s+" from "+i.name())))})})}),o}}(suso),function(e){"use strict";e.rules.restrictedPossibleValue=function(e){var t,n,r,o,i=e.allGroups(),s=!1;return i.forEach(function(i){i.possibleValues().forEach(function(l){t=[[],[]],i.cells().filter(function(e){return e.hasPossible(l)}).forEach(function(e){"block"===i.type()?(r=t[0],o=t[1],-1===r.indexOf(e.row())&&r.push(e.row()),-1===o.indexOf(e.col())&&o.push(e.col())):(n=t[0],-1===n.indexOf(e.block())&&n.push(e.block()))}),"block"===i.type()?t.filter(function(e){return 1===e.length}).forEach(function(t){t[0].cells().forEach(function(n){n.block()!==i&&n.hasPossible(l)&&n.removePossible(l)&&(s=!0,e.trigger("report",t[0],"claimed "+l.toString()+" in "+i.name()+" - remove possibles from intersecting "+t[0].name()))})}):1===t[0].length&&t[0][0].cells().forEach(function(n){n.row()!==i&&n.col()!==i&&n.hasPossible(l)&&n.removePossible(l)&&(s=!0,e.trigger("report",t[0][0],"claimed "+l.toString()+" in "+i.name()+" - remove possibles from intersecting "+t[0][0].name()))})})}),s}}(suso),function(e){"use strict";e.views.InputGrid=function(e,t){function n(t,n){var r,o=e.row(c).cells()[n],i=o.value(),s=o.isSeed(),l="";if(i)return"<span class='value"+(s?" seed":"")+"'>"+i.toString()+"</span>";for(r=1;10>r;r++)l+="<span class='poss'>"+(o.hasPossible(r)?r.toString():"")+"</span>";return l}function r(){for(a="",c=0;9>c;c++)a+=d.replace(/\{([0-9])\}/g,n),a+="\n";l.innerHTML=a}function o(){var t,n,r=[];for(c=0;9>c;c++){for(t=[],u=0;9>u;u++)n=document.getElementById("c"+c.toString()+u.toString()).value,t.push(""===n?null:parseInt(n,10));r.push(t)}e.addSeeds(r)}function i(){var n=document.getElementById("solve");n.removeEventListener("click",i),t.removeChild(n),o(),r(),e.solve()}function s(){for(a="",c=0;9>c;c++){for(a+="<div class='row'>",u=0;9>u;u++)a+="<input id='c"+c.toString()+u.toString()+"' class='cell seed value' maxlength='1'"+(0===c&&0===u?" autofocus":"")+"/>";a+="</div>"}l.innerHTML=a}var l,a,c,u,f,p,d="<div class='row'><span class='cell'>{0}</span><span class='cell'>{1}</span><span class='cell'>{2}</span><span class='cell'>{3}</span><span class='cell'>{4}</span><span class='cell'>{5}</span><span class='cell'>{6}</span><span class='cell'>{7}</span><span class='cell'>{8}</span></div>",h=".grid { display: table; border-top: solid 2px black; border-left: solid 2px black; }\n.row { display: table-row; border-bottom: solid 1px grey; }\n.row:nth-of-type(3n+0) .cell { border-bottom: solid 2px black; }\n.cell { width: 38px; height: 40px; display: table-cell; border-style: solid; border-color: grey; border-width: 0 1px 1px 0;  text-align: center; vertical-align: middle; font-family: serif; padding-top: 1px; }\n.cell:nth-of-type(3n+0) { border-right: solid 2px black; }\n.poss { font-size: 12px; line-height: 12px; float: left; font-family: sans-serif; width: 33%; color: gray; min-height: 12px; }\n.value { font-size: 22px; font-weight: bold; }\n.seed { color: tomato; }\n#solve { margin: 30px 0; padding: 6px 12px; font-size: 14px; font-weight: 400;   border: solid 1px #ccc; border-radius: 4px; background-color: #fff; }\n#solve:focus { color: #333; background-color: #e6e6e6; border-color: #8c8c8c; }\n#solve:hover { color: #333; background-color: #e6e6e6; border-color: #adadad; }\n",v=[];return this.createStep=function(){return v[v.length]=l.innerHTML,v.length-1},this.renderStep=function(e){l.innerHTML=v[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),f=document.createElement("style"),t.appendChild(f),f.innerHTML=h,l=document.createElement("div"),l.setAttribute("class","grid"),t.appendChild(l),p=document.createElement("input"),p.setAttribute("id","solve"),p.setAttribute("type","button"),p.setAttribute("value","Solve!"),t.appendChild(p),p.addEventListener("click",i),e.on("update",r),e.on("report",r),s()}}(suso),function(e){"use strict";e.views.Preformatted=function(e,t){function n(t,n){var r=e.row(s).cells()[n].value();return void 0===r?"-":r.toString()}function r(){for(i="\n",s=0;9>s;s++)i+=l.replace(/\{([0-9])\}/g,n),i+="\n",(2===s||5===s)&&(i+="\n");o.innerHTML=i}var o,i,s,l="{0}{1}{2} {3}{4}{5} {6}{7}{8}",a=[];return this.createStep=function(){return a[a.length]=o.innerHTML,a.length-1},this.renderStep=function(e){o.innerHTML=a[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),o=document.createElement("pre"),t.appendChild(o),e.on("update",r),r()}}(suso),function(e){"use strict";e.views.Report=function(e){function t(){var e;s&&(0===this.id.indexOf("step")&&(e=parseInt(this.id.substring(4),10)),isNaN(e)||l.renderStep(e))}function n(e,n){var o;o=document.createElement("div"),o.setAttribute("class","report"),r.appendChild(o),void 0!==l&&l.hasOwnProperty("createStep")&&(o.setAttribute("id","step"+l.createStep()),o.addEventListener("mouseover",t)),"string"==typeof e?o.innerHTML=e:"object"==typeof e&&e.hasOwnProperty("coords")?o.innerHTML="cell action: "+e.coords()+(void 0===e.value()?"":" = "+e.value().toString())+(void 0===n?"":" -- "+n):"object"==typeof e&&e.hasOwnProperty("state")?(o.innerHTML=n,("complete"===e.state()||"incomplete"===e.state())&&(s=!0)):o.innerHTML=n}var r,o,i=".report-container { border: solid 2px blue; margin-top: 1em; width: 100%; }\n.report { border-top: solid 1px grey; margin: 5px; }\n.title { font-size: 22px; font-weight: bold; margin: 5px; line-height: 1.5em; }",s=!1,l=e.gridView;this.grid=e.grid,this.ctrl=e.ctrl,void 0===this.ctrl&&(this.ctrl=document.createElement("div"),this.ctrl.setAttribute("id","Report-Display"),document.body.appendChild(this.ctrl)),o=document.createElement("style"),this.ctrl.appendChild(o),o.innerHTML=i,r=document.createElement("div"),r.setAttribute("class","report-container"),this.ctrl.appendChild(r),r.innerHTML="<span id='report-title' class='title'>Report</span>",this.grid.on("report",n)}}(suso),function(e){"use strict";e.views.StaticGrid=function(e,t){function n(t,n){var r,o=e.row(s).cells()[n],i=o.value(),l=o.isSeed(),a="";if(i)return"<span class='value"+(l?" seed":"")+"'>"+i.toString()+"</span>";for(r=1;10>r;r++)a+="<span class='poss'>"+(o.hasPossible(r)?r.toString():"")+"</span>";return a}function r(){for(i="",s=0;9>s;s++)i+=a.replace(/\{([0-9])\}/g,n),i+="\n";o.innerHTML=i}var o,i,s,l,a="<div class='row'><span class='cell'>{0}</span><span class='cell'>{1}</span><span class='cell'>{2}</span><span class='cell'>{3}</span><span class='cell'>{4}</span><span class='cell'>{5}</span><span class='cell'>{6}</span><span class='cell'>{7}</span><span class='cell'>{8}</span></div>",c=".grid { display: table; border-top: solid 2px black; border-left: solid 2px black; }\n.row { display: table-row; border-bottom: solid 1px grey; }\n.row:nth-of-type(3n+0) .cell { border-bottom: solid 2px black; }\n.cell { width: 38px; height: 40px; text-align: center; vertical-align: middle; padding-top: 1px; display: table-cell; border-right: solid 1px grey; border-bottom: solid 1px grey; }\n.cell:nth-of-type(3n+0) { border-right: solid 2px black; }\n.poss { font-size: 12px; line-height: 12px; float: left; font-family: sans-serif; width: 33%; color: gray; min-height: 12px; }\n.value { font-size: 22px; font-weight: bold; }\n.seed { color: tomato; }\n",u=[];return this.createStep=function(){return u[u.length]=o.innerHTML,u.length-1},this.renderStep=function(e){o.innerHTML=u[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),l=document.createElement("style"),t.appendChild(l),l.innerHTML=c,o=document.createElement("div"),o.setAttribute("class","grid"),t.appendChild(o),e.on("update",r),e.on("report",r),r()}}(suso);