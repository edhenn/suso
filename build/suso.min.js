var suso={};!function(e){"use strict";e.EventAware=function(e){var t={};return e.on=function(n,r){return void 0===t[n]&&(t[n]=[]),t[n].push(r),e},e.off=function(n){return void 0===t[n]?e:(t[n]=[],e)},e.trigger=function(n){var r,o,s=t[n];if(void 0===s)return e;for(Array.prototype.splice.call(arguments,0,1),r=0;r<s.length;r+=1)o=s[r],void 0!==o&&"function"==typeof o&&o.apply(this,arguments);return e},e}}(suso),function(e){"use strict";e.filter=function(e,t){var n,r={};if(void 0===e||"object"!=typeof e)throw new Error("Filter object not specified");if(void 0===t||"function"!=typeof t)throw new Error("Filter function not specified");for(n in e)e.hasOwnProperty(n)&&"where"!==n&&"each"!==n&&t(e[n],n)&&(r[n]=e[n]);return r},e.forEach=function(e,t){var n,r,o={};if(void 0===e||"object"!=typeof e)throw new Error("ForEach object not specified");if(void 0===t||"function"!=typeof t)throw new Error("ForEach function not specified");for(n in e)e.hasOwnProperty(n)&&"where"!==n&&"each"!==n&&(r=t(e[n],n),o[n]=r||e[n]);return o}}(suso),function(e){"use strict";function t(){function t(e,t){c++,"ready"===a&&(d.trigger("update",d),d.trigger("report",e,t))}var n,r,o,s,i=[],l=[],u=[],a="init",c=0,p=[],d=this;for(r=0;9>r;r++)i.push(new e.House("block",r,d)),l.push(new e.House("col",r,d)),u.push(new e.House("row",r,d));for(r=0;81>r;r++)o=new e.Cell(this),o.on("update",t),o.setHouse(u[Math.floor(r/9)],"row"),o.setHouse(l[r%9],"col"),o.setHouse(i[Math.floor(r/3)%3+3*Math.floor(r/27)],"block");a="unseeded",this.seedSolved=p,this.state=function(){return a},this.rows=u,this.cols=l,this.vRow=function(e){return l[e]},this.hRow=function(e){return u[e]},this.block=function(e){return i[e]},this.allGroups=function(){return void 0===s&&(s=u.concat(l).concat(i)),s},this.addSeeds=function(e){var t,n,r;if("unseeded"!==a)return this;for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)r=e[t][n],void 0!==r&&"number"==typeof r&&u[t].cells()[n].setValue(r);return a="ready",d.trigger("report",d,"grid seeded"),this},this.solve=function(){var t,r,o,s=!0;if("complete"===a||"incomplete"===a)return this;for(r=0;r<p.length;r++)o=p[r].possibleValues(),1===o.length&&p[r].setValue(o[0],"one remaining value after seeding");for(n=[e.rules.lastInGroup,e.rules.restrictedPossibleValue,e.rules.pairs,e.rules.hiddenpairs,e.rules.triples];s&&81!==c;)for(s=!1,t=0;t<n.length&&81!==c;t++)s=s||n[t](d);return a=81===c?"complete":"incomplete",d.trigger("report",d,"grid "+a),this}}e.Grid=function(){return new e.EventAware(new t)}}(suso),function(e){"use strict";function t(e,t,n){function r(e){var t=e.value();if(void 0===s[t])throw new Error("Attempt to set a Cell to a value not contained in House's possibles list.");delete s[t],s.length--}var o=[],s={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,length:9},i=this;this.possibles=s,this.possibleValues=function(){var e,t=[];for(e=1;10>e;e++)s.hasOwnProperty(e)&&t.push(e);return t},this.addCell=function(e){return o.push(e),e.on("update",function(){i.trigger("update",this),r(this)}),i},this.grid=function(){return n},this.type=function(){return e},this.num=function(){return t},this.cells=function(){return o},this.name=function(){return e+" "+t.toString()}}e.House=function(n,r,o){return new e.EventAware(new t(n,r,o))}}(suso),function(e){"use strict";function t(e,t){function n(e){var t=e.value();c.removePossible(t)}var r,o=e,s=[],i={row:0,col:1,block:2},l={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},u=9,a=!1,c=this;this.id=function(){return o},this.possibles=l,this.removePossible=function(e){return void 0!==l[e]?(delete l[e],u--,1===u&&("ready"===t.state()?c.setValue(c.possibleValues()[0],"last remaining possible value in cell"):t.seedSolved.push(c)),!0):!1},this.grid=function(){return t},this.value=function(){return r},this.isSeed=function(){return a},this.setValue=function(e,n){if(void 0!==r)throw new Error("Attempt to set value on a Cell that already has a value.");"unseeded"===t.state()&&(a=!0),r=e,c.possibles=l={},u=0,this.trigger("update",this,n)},this.setHouse=function(e){var t=i[e.type()];if(void 0===t)throw new Error("invalid house");if(void 0!==s[t])throw new Error("Attempt to set "+e.type()+" on a Cell that already has a "+e.type()+".");s[t]=e,e.addCell(this),e.on("update",n)},this.row=function(){return s[i.row]},this.col=function(){return s[i.col]},this.block=function(){return s[i.block]},this.possibleValues=function(){var e,t=[];for(e=1;10>e;e++)l.hasOwnProperty(e)&&t.push(e);return t},this.possibleFlags=function(){var e,t=0;for(e=1;10>e;e++)t=t<<1|(l.hasOwnProperty(e)?1:0);return t},this.coords=function(){return void 0===s[i.row]||void 0===s[i.col]?[]:[s[i.row].num(),s[i.col].num()]}}var n=0;e.Cell=function(r){return new e.EventAware(new t(n++,r))}}(suso),function(e){"use strict";void 0===e.rules&&(e.rules={}),e.rules.hiddenpairs=function(t){var n,r,o,s,i,l,u,a,c,p,d,f=!1,h=t.allGroups();for(n=0;n<h.length;n++)if(r=h[n],o={},!(r.possibleValues().length<3)){for(s=0;9>s;s++)if(i=r.cells()[s],void 0===i.value())for(l=i.possibleValues(),u=0;u<l.length;u++)void 0===o[l[u]]&&(o[l[u]]=[]),o[l[u]].push(i);o=e.filter(o,function(e){return 2===e.length}),e.forEach(o,function(n,r){e.forEach(o,function(e,o){if(o>r&&n[0]===e[0]&&n[1]===e[1])for(a=Math.pow(2,9-r)|Math.pow(2,9-o),c=0;2>c;c++)for(p=n[c].possibleFlags()^a,d=9;p>0;)(1&p)>0&&n[c].removePossible(d)&&(t.trigger("report",n[c],"hidden pairs - remove possible "+d),f=!0),d--,p>>=1})})}return f}}(suso),function(e){"use strict";void 0===e.rules&&(e.rules={}),e.rules.lastInGroup=function(e){var t,n,r,o,s,i,l,u=e.allGroups(),a=!1;for(t=0;t<u.length;t++){for(i={},n=u[t].cells(),r=0;r<n.length;r++)for(o=n[r].possibleValues(),s=0;s<o.length;s++)void 0===i[o[s]]&&(i[o[s]]=[]),i[o[s]].push(n[r]);for(l in i)i.hasOwnProperty(l)&&1===i[l].length&&void 0===i[l][0].value()&&(i[l][0].setValue(parseInt(l,10),"last in group - "+u[t].name()),a=!0)}return a}}(suso),function(e){"use strict";void 0===e.rules&&(e.rules={}),e.rules.pairs=function(t){var n,r,o,s,i,l,u,a,c=!1,p=t.allGroups();for(n=0;n<p.length;n++){for(r=p[n],i={},o=0;9>o;o++)s=r.cells()[o],void 0===s.value()&&2===s.possibleValues().length&&(l=s.possibleValues().join(""),void 0===i[l]&&(i[l]=[]),i[l].push(s));i=e.filter(i,function(e){return 2===e.length}),e.forEach(i,function(n,o){var s=!1,i=o.split("");e.forEach(r.cells(),function(e){e!==n[0]&&e!==n[1]&&(u=e.removePossible(parseInt(i[0],10)),a=e.removePossible(parseInt(i[1],10)),s=s||u||a)}),s&&(c=!0,t.trigger("report",r,"pairs rule - remove possible vals "+i+" from "+r.name()))})}return c}}(suso),function(e){"use strict";void 0===e.rules&&(e.rules={}),e.rules.restrictedPossibleValue=function(e){var t,n,r,o,s=e.allGroups(),i=!1;return s.forEach(function(s){s.possibleValues().forEach(function(l){t=[[],[]],s.cells().forEach(function(e){void 0!==e.possibles[l]&&("block"===s.type()?(r=t[0],o=t[1],-1===r.indexOf(e.row())&&r.push(e.row()),-1===o.indexOf(e.col())&&o.push(e.col())):(n=t[0],-1===n.indexOf(e.block())&&n.push(e.block())))}),"block"===s.type()?t.filter(function(e){return 1===e.length}).forEach(function(t){t[0].cells().forEach(function(n){n.block()!==s&&void 0!==n.possibles[l]&&n.removePossible(l)&&(i=!0,e.trigger("report",t[0],"claimed "+l.toString()+" in "+s.name()+" - remove possibles from intersecting "+t[0].name()))})}):1===t[0].length&&t[0][0].cells().forEach(function(n){n.row()!==s&&n.col()!==s&&void 0!==n.possibles[l]&&n.removePossible(l)&&(i=!0,e.trigger("report",t[0][0],"claimed "+l.toString()+" in "+s.name()+" - remove possibles from intersecting "+t[0][0].name()))})})}),i}}(suso),function(e){"use strict";function t(e){var t=0;if("number"!=typeof e)return null;if(0>=e)return 0;for(;e>0;)t+=1&e,e>>=1;return t}function n(e){var t,n=[];if("number"!=typeof e)return null;if(0>=e)return n;for(t=9;t>0;t--)1===(1&e)&&n.push(t),e>>=1;return n}void 0===e.rules&&(e.rules={}),e.rules.triples=function(e){var r,o,s,i,l,u,a,c=!1,p=e.allGroups();return p.forEach(function(p){r=[],o=[],p.cells().filter(function(e){return void 0===e.value()}).forEach(function(e){s=t(e.possibleFlags()),(2===s||3===s)&&(r.forEach(function(t){t.possibleFlags()&e.possibleFlags()>0&&o.push([t,e])}),r.push(e))}),o.forEach(function(o){r.forEach(function(r){r!==o[0]&&r!==o[1]&&(i=o[0].possibleFlags()|o[1].possibleFlags()|r.possibleFlags(),3===t(i)&&(l=n(i),p.cells().forEach(function(e){if(e!==o[0]&&e!==o[1]&&e!==r)for(u=0;3>u;u++)a|=e.removePossible(l[u])}),a&&(a=!1,c=!0,e.trigger("report",p,"triplet "+l+" in "+p.name()+" - remove other possibles"))))})})}),c}}(suso),function(e){"use strict";void 0===e.views&&(e.views={}),e.views.InputGrid=function(e,t){function n(t,n){var r=e.hRow(a).cells()[n],o=r.value(),s=r.isSeed();return o?"<span class='value"+(s?" seed":"")+"'>"+o.toString()+"</span>":"<span class='poss'>"+r.possibleValues().join(" ")+"</span>"}function r(){for(u="",a=0;9>a;a++)u+=f.replace(/\{([0-9])\}/g,n),u+="\n";l.innerHTML=u}function o(){var t,n,r=[];for(a=0;9>a;a++){for(t=[],c=0;9>c;c++)n=document.getElementById("c"+a.toString()+c.toString()).value,t.push(""===n?null:parseInt(n,10));r.push(t)}e.addSeeds(r)}function s(){var n=document.getElementById("solve");n.removeEventListener("click",s),t.removeChild(n),o(),r(),e.solve()}function i(){for(u="",a=0;9>a;a++){for(u+="<div class='row'>",c=0;9>c;c++)u+="<input id='c"+a.toString()+c.toString()+"' class='cell seed value' maxlength='1'"+(0===a&&0===c?" autofocus":"")+"/>";u+="</div>"}l.innerHTML=u}var l,u,a,c,p,d,f="<div class='row'><span class='cell'>{0}</span><span class='cell'>{1}</span><span class='cell'>{2}</span><span class='cell'>{3}</span><span class='cell'>{4}</span><span class='cell'>{5}</span><span class='cell'>{6}</span><span class='cell'>{7}</span><span class='cell'>{8}</span></div>",h=".grid { display: table; border-top: solid 2px black; border-left: solid 2px black; }\n.row { display: table-row; border-bottom: solid 1px grey; }\n.row:nth-of-type(3n+0) .cell { border-bottom: solid 2px black; }\n.cell { width: 39px; height: 40px; display: table-cell; border-style: solid; border-color: grey; border-width: 0 1px 1px 0;  text-align: center; vertical-align: middle; font-family: serif; }\n.cell:nth-of-type(3n+0) { border-right: solid 2px black; }\n.poss { font-size: 12px; line-height: 10px }\n.value { font-size: 22px; font-weight: bold; }\n.seed { color: tomato; }\n#solve { margin: 30px 0; padding: 6px 12px; font-size: 14px; font-weight: 400;   border: solid 1px #ccc; border-radius: 4px; background-color: #fff; }\n#solve:focus { color: #333; background-color: #e6e6e6; border-color: #8c8c8c; }\n#solve:hover { color: #333; background-color: #e6e6e6; border-color: #adadad; }\n",v=[];return this.createStep=function(){return v[v.length]=l.innerHTML,v.length-1},this.renderStep=function(e){l.innerHTML=v[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),p=document.createElement("style"),t.appendChild(p),p.innerHTML=h,l=document.createElement("div"),l.setAttribute("class","grid"),t.appendChild(l),d=document.createElement("input"),d.setAttribute("id","solve"),d.setAttribute("type","button"),d.setAttribute("value","Solve!"),t.appendChild(d),d.addEventListener("click",s),e.on("update",r),e.on("report",r),i()}}(suso),function(e){"use strict";void 0===e.views&&(e.views={}),e.views.Preformatted=function(e,t){function n(t,n){var r=e.hRow(i).cells()[n].value();return void 0===r?"-":r.toString()}function r(){for(s="\n",i=0;9>i;i++)s+=l.replace(/\{([0-9])\}/g,n),s+="\n",(2===i||5===i)&&(s+="\n");o.innerHTML=s}var o,s,i,l="{0}{1}{2} {3}{4}{5} {6}{7}{8}",u=[];return this.createStep=function(){return u[u.length]=o.innerHTML,u.length-1},this.renderStep=function(e){o.innerHTML=u[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),o=document.createElement("pre"),t.appendChild(o),e.on("update",r),r()}}(suso),function(e){"use strict";void 0===e.views&&(e.views={}),e.views.Report=function(e){function t(){var e;i&&(0===this.id.indexOf("step")&&(e=parseInt(this.id.substring(4),10)),isNaN(e)||l.renderStep(e))}function n(e,n){var o;o=document.createElement("div"),o.setAttribute("class","report"),r.appendChild(o),void 0!==l&&l.hasOwnProperty("createStep")&&(o.setAttribute("id","step"+l.createStep()),o.addEventListener("mouseover",t)),"string"==typeof e?o.innerHTML=e:"object"==typeof e&&e.hasOwnProperty("coords")?o.innerHTML="cell action: "+e.coords()+(void 0===e.value()?"":" = "+e.value().toString())+(void 0===n?"":" -- "+n):"object"==typeof e&&e.hasOwnProperty("state")?(o.innerHTML=n,("complete"===e.state()||"incomplete"===e.state())&&(i=!0)):o.innerHTML=n}var r,o,s=".report-container { border: solid 2px blue; margin-top: 1em; width: 100%; }\n.report { border-top: solid 1px grey; margin: 5px; }\n.title { font-size: 22px; font-weight: bold; margin: 5px; line-height: 1.5em; }",i=!1,l=e.gridView;this.grid=e.grid,this.ctrl=e.ctrl,void 0===this.ctrl&&(this.ctrl=document.createElement("div"),this.ctrl.setAttribute("id","Report-Display"),document.body.appendChild(this.ctrl)),o=document.createElement("style"),this.ctrl.appendChild(o),o.innerHTML=s,r=document.createElement("div"),r.setAttribute("class","report-container"),this.ctrl.appendChild(r),r.innerHTML="<span id='report-title' class='title'>Report</span>",this.grid.on("report",n)}}(suso),function(e){"use strict";void 0===e.views&&(e.views={}),e.views.StaticGrid=function(e,t){function n(t,n){var r=e.hRow(i).cells()[n],o=r.value(),s=r.isSeed();return o?"<span class='value"+(s?" seed":"")+"'>"+o.toString()+"</span>":"<span class='poss'>"+r.possibleValues().join(" ")+"</span>"}function r(){for(s="",i=0;9>i;i++)s+=u.replace(/\{([0-9])\}/g,n),s+="\n";o.innerHTML=s}var o,s,i,l,u="<div class='row'><span class='cell'>{0}</span><span class='cell'>{1}</span><span class='cell'>{2}</span><span class='cell'>{3}</span><span class='cell'>{4}</span><span class='cell'>{5}</span><span class='cell'>{6}</span><span class='cell'>{7}</span><span class='cell'>{8}</span></div>",a=".grid { display: table; border-top: solid 2px black; border-left: solid 2px black; }\n.row { display: table-row; border-bottom: solid 1px grey; }\n.row:nth-of-type(3n+0) .cell { border-bottom: solid 2px black; }\n.cell { width: 38px; height: 40px; display: table-cell; border-right: solid 1px grey; border-bottom: solid 1px grey; text-align: center; vertical-align: middle; }\n.cell:nth-of-type(3n+0) { border-right: solid 2px black; }\n.poss { font-size: 12px; line-height: 10px }\n.value { font-size: 22px; font-weight: bold; }\n.seed { color: tomato; }\n",c=[];return this.createStep=function(){return c[c.length]=o.innerHTML,c.length-1},this.renderStep=function(e){o.innerHTML=c[e]},this.grid=e,this.ctrl=t,void 0===t&&(t=document.createElement("div"),t.setAttribute("id","Grid-Display"),document.body.appendChild(t)),l=document.createElement("style"),t.appendChild(l),l.innerHTML=a,o=document.createElement("div"),o.setAttribute("class","grid"),t.appendChild(o),e.on("update",r),e.on("report",r),r()}}(suso);